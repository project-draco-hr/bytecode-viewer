{
  setState("Bytecode Viewer Boot Screen - Checking Krakatau...");
  System.out.println("Checking krakatau");
  File krakatauZip=null;
  for (  File f : new File(BytecodeViewer.libsDirectory).listFiles()) {
    if (f.getName().toLowerCase().startsWith("krakatau-")) {
      BytecodeViewer.krakatauVersion=f.getName().split("-")[1].split("\\.")[0];
      krakatauZip=f;
    }
  }
  for (  File f : new File(BytecodeViewer.getBCVDirectory()).listFiles()) {
    if (f.getName().toLowerCase().startsWith("krakatau_") && !f.getName().split("_")[1].split("\\.")[0].equals(BytecodeViewer.krakatauVersion)) {
      setState("Bytecode Viewer Boot Screen - Removing Outdated " + f.getName() + "...");
      System.out.println("Removing oudated " + f.getName());
      try {
        FileUtils.deleteDirectory(f);
      }
 catch (      Exception e) {
        e.printStackTrace();
      }
    }
  }
  BytecodeViewer.krakatauWorkingDirectory=BytecodeViewer.getBCVDirectory() + BytecodeViewer.fs + "krakatau_"+ BytecodeViewer.krakatauVersion+ BytecodeViewer.fs+ "Krakatau-master";
  File krakatauDirectory=new File(BytecodeViewer.getBCVDirectory() + BytecodeViewer.fs + "krakatau_"+ BytecodeViewer.krakatauVersion);
  if (!krakatauDirectory.exists()) {
    try {
      setState("Bytecode Viewer Boot Screen - Updating to " + krakatauDirectory.getName() + "...");
      ZipUtils.unzipFilesToPath(krakatauZip.getAbsolutePath(),krakatauDirectory.getAbsolutePath());
      System.out.println("Updated to krakatau v" + BytecodeViewer.krakatauVersion);
    }
 catch (    Exception e) {
      BytecodeViewer.showMessage("ERROR: There was an issue unzipping Krakatau decompiler (possibly corrupt). Restart BCV." + BytecodeViewer.nl + "If the error persists contact @Konloch.");
      new the.bytecode.club.bytecodeviewer.api.ExceptionUI(e);
      krakatauZip.delete();
    }
  }
}
