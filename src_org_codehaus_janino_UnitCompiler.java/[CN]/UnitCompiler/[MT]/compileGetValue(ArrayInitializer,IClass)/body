{
  if (!arrayType.isArray()) {
    this.compileError("Array initializer not allowed for non-array type \"" + arrayType.toString() + "\"");
  }
  IClass ct=arrayType.getComponentType();
  this.pushConstant(ai,new Integer(ai.values.length));
  this.newArray(ai,1,0,ct);
  for (int i=0; i < ai.values.length; ++i) {
    this.writeOpcode(ai,Opcode.DUP);
    this.pushConstant(ai,new Integer(i));
    ArrayInitializerOrRvalue aiorv=ai.values[i];
    if (aiorv instanceof Rvalue) {
      Rvalue rv=(Rvalue)aiorv;
      this.assignmentConversion(ai,this.compileGetValue(rv),ct,this.getConstantValue(rv));
    }
 else     if (aiorv instanceof ArrayInitializer) {
      this.compileGetValue((ArrayInitializer)aiorv,ct);
    }
 else {
      throw new JaninoRuntimeException("Unexpected array initializer or rvalue class " + aiorv.getClass().getName());
    }
    this.writeOpcode(ai,Opcode.IASTORE + UnitCompiler.ilfdabcs(ct));
  }
}
