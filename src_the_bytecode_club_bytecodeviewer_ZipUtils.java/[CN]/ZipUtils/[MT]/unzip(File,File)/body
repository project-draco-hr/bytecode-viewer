{
  if (zipFile == null) {
    throw new IllegalArgumentException("Cannot unzip a null file!");
  }
  if (target == null) {
    throw new IllegalArgumentException("Cannot unzip to a null target!");
  }
  byte[] buffer=new byte[1024];
  if (!target.exists()) {
    target.mkdir();
  }
 else   if (target.isFile()) {
    target=target.getParentFile();
    if (target == null) {
      throw new IllegalArgumentException("Target is a file and has no parent!");
    }
  }
  ZipInputStream zipInputStream=new ZipInputStream(new FileInputStream(zipFile));
  try {
    for (ZipEntry entry=zipInputStream.getNextEntry(); entry != null; entry=zipInputStream.getNextEntry()) {
      File file=new File(target,entry.getName());
      new File(file.getParent()).mkdirs();
      FileOutputStream fileOutputStream=new FileOutputStream(file);
      try {
        int length;
        while ((length=zipInputStream.read(buffer)) > 0) {
          fileOutputStream.write(buffer,0,length);
        }
      }
  finally {
        fileOutputStream.close();
      }
      zipInputStream.closeEntry();
    }
  }
  finally {
    zipInputStream.close();
  }
}
