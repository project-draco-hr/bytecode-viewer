{
  ClassFile.ConstantPoolInfo cpi=this.classFile.getConstantPoolInfo(idx);
  ClassFile.ConstantNameAndTypeInfo nat=(cpi instanceof ClassFile.ConstantInterfaceMethodrefInfo ? ((ClassFile.ConstantInterfaceMethodrefInfo)cpi).getNameAndType(this.classFile) : ((ClassFile.ConstantMethodrefInfo)cpi).getNameAndType(this.classFile));
  String desc=nat.getDescriptor(this.classFile);
  if (desc.charAt(0) != '(')   throw new JaninoRuntimeException("Method descriptor does not start with \"(\"");
  int i=1;
  int res=0;
  for (; ; ) {
switch (desc.charAt(i++)) {
case ')':
      return res - Descriptor.size(desc.substring(i));
case 'B':
case 'C':
case 'F':
case 'I':
case 'S':
case 'Z':
    res+=1;
  break;
case 'D':
case 'J':
res+=2;
break;
case '[':
res+=1;
while (desc.charAt(i) == '[') ++i;
if ("BCFISZDJ".indexOf(desc.charAt(i)) != -1) {
++i;
break;
}
if (desc.charAt(i) != 'L') throw new JaninoRuntimeException("Invalid char after \"[\"");
++i;
while (desc.charAt(i++) != ';') ;
break;
case 'L':
res+=1;
while (desc.charAt(i++) != ';') ;
break;
default :
throw new JaninoRuntimeException("Invalid method descriptor");
}
}
}
