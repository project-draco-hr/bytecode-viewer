{
  if (this.tabulatorBuffer != null) {
    this.tabulatorBuffer.add(new StringBuilder(line.length()).append(line));
    if (line.charAt(0) == AutoIndentWriter.INDENT) {
      ++this.indentation;
      line=line.substring(1);
    }
    if (line.charAt(0) == AutoIndentWriter.UNINDENT && --this.indentation < this.tabulatorIndentation) {
      this.flushTabulatorBuffer();
    }
  }
 else   if (line.indexOf(AutoIndentWriter.TABULATOR) != -1) {
    if (line.charAt(0) == AutoIndentWriter.INDENT) {
      ++this.indentation;
      line=line.substring(1);
    }
    if (line.charAt(0) == AutoIndentWriter.UNINDENT) {
      --this.indentation;
      line=line.substring(1);
    }
    this.tabulatorBuffer=new ArrayList<StringBuilder>();
    this.tabulatorBuffer.add(new StringBuilder(line.length()).append(line));
    this.tabulatorIndentation=this.indentation;
  }
 else {
    if (line.charAt(0) == AutoIndentWriter.CLEAR_TABULATORS)     line=line.substring(1);
    if (line.charAt(0) == AutoIndentWriter.INDENT) {
      ++this.indentation;
      line=line.substring(1);
    }
    if (line.charAt(0) == AutoIndentWriter.UNINDENT) {
      --this.indentation;
      line=line.substring(1);
    }
    if ("\r\n".indexOf(line.charAt(0)) == -1) {
      for (int i=0; i < this.indentation; ++i)       this.out.write("    ");
    }
    this.out.write(line);
  }
}
