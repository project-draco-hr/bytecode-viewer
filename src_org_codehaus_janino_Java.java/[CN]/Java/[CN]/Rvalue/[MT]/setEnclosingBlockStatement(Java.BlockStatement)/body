{
  this.accept((Visitor.RvalueVisitor)new Traverser(){
    @Override public void traverseRvalue(    Java.Rvalue rv){
      if (rv.enclosingBlockStatement != null && enclosingBlockStatement != rv.enclosingBlockStatement) {
        throw new JaninoRuntimeException("Enclosing block statement for rvalue \"" + rv + "\" at "+ rv.getLocation()+ " is already set");
      }
      rv.enclosingBlockStatement=enclosingBlockStatement;
      super.traverseRvalue(rv);
    }
    @Override public void traverseAnonymousClassDeclaration(    Java.AnonymousClassDeclaration acd){
      acd.setEnclosingScope(enclosingBlockStatement);
      ;
    }
    @Override public void traverseType(    Java.Type t){
      if (t.enclosingScope != null && enclosingBlockStatement != t.enclosingScope) {
        throw new JaninoRuntimeException("Enclosing scope already set for type \"" + this.toString() + "\" at "+ t.getLocation());
      }
      t.enclosingScope=enclosingBlockStatement;
      super.traverseType(t);
    }
  }
.comprehensiveVisitor());
}
