{
  try {
    final ClassWriter cw=new ClassWriter(0);
    cn.accept(cw);
    String fileStart=BytecodeViewer.tempDirectory + BytecodeViewer.fs + "temp";
    int fileNumber=getClassNumber(fileStart,".class");
    final File tempClass=new File(fileStart + fileNumber + ".class");
    try {
      final FileOutputStream fos=new FileOutputStream(tempClass);
      fos.write(cw.toByteArray());
      fos.close();
    }
 catch (    final IOException e) {
      new the.bytecode.club.bytecodeviewer.gui.StackTraceUI(e);
    }
    DecompilerSettings settings=getDecompilerSettings();
    LuytenTypeLoader typeLoader=new LuytenTypeLoader();
    MetadataSystem metadataSystem=new MetadataSystem(typeLoader);
    TypeReference type=metadataSystem.lookupType(tempClass.getCanonicalPath());
    DecompilationOptions decompilationOptions=new DecompilationOptions();
    decompilationOptions.setSettings(DecompilerSettings.javaDefaults());
    decompilationOptions.setFullDecompilation(true);
    TypeDefinition resolvedType=null;
    if (type == null || ((resolvedType=type.resolve()) == null)) {
      throw new Exception("Unable to resolve type.");
    }
    StringWriter stringwriter=new StringWriter();
    settings.getLanguage().decompileType(resolvedType,new PlainTextOutput(stringwriter),decompilationOptions);
    String decompiledSource=stringwriter.toString();
    return decompiledSource;
  }
 catch (  Exception e) {
    new the.bytecode.club.bytecodeviewer.gui.StackTraceUI(e);
  }
  return "Procyon error! Send the stacktrace to Konloch at http://the.bytecode.club or konloch@gmail.com";
}
