{
  ClassBodyEvaluator cbe=new ClassBodyEvaluator();
  cbe.setClassName(className);
  cbe.setExtendedClass(optionalExtendedClass);
  cbe.setImplementedInterfaces(implementedInterfaces);
  cbe.setParentClassLoader(optionalParentClassLoader);
  cbe.cook(scanner);
  Class c=cbe.getClazz();
  try {
    return c.newInstance();
  }
 catch (  InstantiationException e) {
    throw new CompileException(e.getMessage(),null);
  }
catch (  IllegalAccessException e) {
    throw new JaninoRuntimeException(e.toString(),e);
  }
}
